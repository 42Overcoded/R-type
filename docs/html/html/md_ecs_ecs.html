<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: Ecs documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-Type
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">R-Type is a 2D shoot&#39;em up game.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Ecs documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How the ecs works :</p>
<p>The ecs is composed of 5 main parts :</p><ul>
<li>The registry</li>
<li>The Sparse Arrays</li>
<li>The components</li>
<li>The entities</li>
<li>The systems</li>
</ul>
<ol type="1">
<li>The registry is the main part of the ecs, it's the core of it. It's the part that will manage all the other parts. In fact, the registry contains all te functions to manage the Sparse Arrays, the entities and the components. It's the part that will be used by the user to create his game.</li>
<li>The Sparse Arrays are the part that will contain the components. It's a vector of components. The Sparse Arrays are used to store the components of the same type. For example, if you have a component <a class="el" href="structPosition.html" title="Position of the entity.">Position</a>, you will have a Sparse Array that will contain all the <a class="el" href="structPosition.html" title="Position of the entity.">Position</a> components of your game.</li>
<li>The Components are the data that will be used by the systems. For example, if you have a component <a class="el" href="structPosition.html" title="Position of the entity.">Position</a>, it will contain the x and y position of an entity. to see more <a class="el" href="md_ecs_components.html">click here</a>.</li>
<li>The entities are the all the objects of your game. For example, if you have a player, a monster and a 10 bullet, you will have 12 entities. The entities are just an id that will be used to associate components to them.</li>
<li>The system is composed of generic functions who can be usefull not for a specific game but for all the games. For example, you can have a system that will move all the entities that have a <a class="el" href="structPosition.html" title="Position of the entity.">Position</a> and a <a class="el" href="structSpeed.html" title="speed of the entity">Speed</a> component.</li>
</ol>
<p>How to use the ecs :</p>
<ol type="1">
<li>you need to create a registry, its a unique object that will manage all the other parts of the ecs; the functions inside of it :<ul>
<li>register_component : add a component to the registry</li>
<li>spawn_entity : create an entity and return its id</li>
<li>add_component : associate a component to an entity</li>
<li>get_components : get a vector of all the components of a type</li>
<li>remove_component : remove a component of an entity</li>
<li>kill_entity : kill an entity</li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="classregistry.html">registry</a> reg;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassregistry_html"><div class="ttname"><a href="classregistry.html">registry</a></div><div class="ttdef"><b>Definition:</b> Registry.hpp:35</div></div>
</div><!-- fragment --><ol type="1">
<li>after you created the registry, you need to register all the components that you will use in your game. For example, if you have a <a class="el" href="structPosition.html" title="Position of the entity.">Position</a> component, you need to register it in the registry.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="classregistry.html">registry</a> reg;</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassregistry_html_a1c8a6043f3ea73045ae7d3ada058890d"><div class="ttname"><a href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">registry::register_component</a></div><div class="ttdeci">void register_component()</div><div class="ttdoc">add a new usable component for entity</div><div class="ttdef"><b>Definition:</b> Registry.hpp:96</div></div>
<div class="ttc" id="astructDrawable_html"><div class="ttname"><a href="structDrawable.html">Drawable</a></div><div class="ttdoc">drawable is a tag to know if the entity is drawable</div><div class="ttdef"><b>Definition:</b> Components.hpp:181</div></div>
<div class="ttc" id="astructPosition_html"><div class="ttname"><a href="structPosition.html">Position</a></div><div class="ttdoc">Position of the entity.</div><div class="ttdef"><b>Definition:</b> Components.hpp:86</div></div>
<div class="ttc" id="astructSpeed_html"><div class="ttname"><a href="structSpeed.html">Speed</a></div><div class="ttdoc">speed of the entity</div><div class="ttdef"><b>Definition:</b> Components.hpp:22</div></div>
</div><!-- fragment --><ol type="1">
<li>after you registered all the components that you will use in your game, you need to create entities. if i want to create my player, i will need to create an entity and add the components that i need to it. For example, if i want to create a player with a position, a speed and a drawable components, i will need to create an entity and add the components to it.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="classregistry.html">registry</a> reg;</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;();</div>
<div class="line">    <a class="code" href="classentity__t.html">entity_t</a> player = reg.<a class="code" href="classregistry.html#a75d49eb0c9936d57146007f06cbaf735">spawn_entity</a>();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;(entity, <a class="code" href="structSpeed.html">Speed</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;(entity, <a class="code" href="structPosition.html">Position</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;(entity, <a class="code" href="structDrawable.html">Drawable</a>());</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassentity__t_html"><div class="ttname"><a href="classentity__t.html">entity_t</a></div><div class="ttdef"><b>Definition:</b> Registry.hpp:24</div></div>
<div class="ttc" id="aclassregistry_html_a49084d6b8c636cb58dc0e9c4b442a339"><div class="ttname"><a href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">registry::add_component</a></div><div class="ttdeci">void add_component(entity_t const &amp;to, Component &amp;&amp;c)</div><div class="ttdef"><b>Definition:</b> Registry.hpp:60</div></div>
<div class="ttc" id="aclassregistry_html_a75d49eb0c9936d57146007f06cbaf735"><div class="ttname"><a href="classregistry.html#a75d49eb0c9936d57146007f06cbaf735">registry::spawn_entity</a></div><div class="ttdeci">entity_t spawn_entity()</div><div class="ttdoc">return entity(size_t) need to use it when you want to create an entity, everything must be an entity ...</div><div class="ttdef"><b>Definition:</b> Registry.cpp:11</div></div>
</div><!-- fragment --><ol type="1">
<li>to get the components of an entity and / or modify them, you need to use the get_components function. For example, if i want to get the position of my player and set it to {300, 300}, i will need to use the get_components function and get the position component of my player.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="classregistry.html">registry</a> reg;</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;();</div>
<div class="line">    <a class="code" href="classentity__t.html">entity_t</a> player = reg.<a class="code" href="classregistry.html#a75d49eb0c9936d57146007f06cbaf735">spawn_entity</a>();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;(entity, <a class="code" href="structSpeed.html">Speed</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;(entity, <a class="code" href="structPosition.html">Position</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;(entity, <a class="code" href="structDrawable.html">Drawable</a>());</div>
<div class="line">    <span class="keyword">auto</span>&amp; pos = reg.<a class="code" href="classregistry.html#a3149b283b4533fa3c8d9ee360f819769">get_components</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;()[player]; <span class="comment">// if you want to get a specific components of an entity, can use the operator []</span></div>
<div class="line">    pos-&gt;x = 300;</div>
<div class="line">    pos-&gt;y = 300;</div>
<div class="line">    <span class="comment">// if you dont want to use the entity anymore, you can kill it</span></div>
<div class="line">    reg.<a class="code" href="classregistry.html#a6c967fb2267fd8eaeb155f2be5b5650c">kill_entity</a>(player);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassregistry_html_a3149b283b4533fa3c8d9ee360f819769"><div class="ttname"><a href="classregistry.html#a3149b283b4533fa3c8d9ee360f819769">registry::get_components</a></div><div class="ttdeci">SparseArray&lt; Component &gt; &amp; get_components()</div><div class="ttdoc">Get the entity list with the selected component, its null if the entity dosnt have the component.</div><div class="ttdef"><b>Definition:</b> Registry.hpp:113</div></div>
<div class="ttc" id="aclassregistry_html_a6c967fb2267fd8eaeb155f2be5b5650c"><div class="ttname"><a href="classregistry.html#a6c967fb2267fd8eaeb155f2be5b5650c">registry::kill_entity</a></div><div class="ttdeci">void kill_entity(entity_t const &amp;e)</div><div class="ttdoc">kill an entity set all components to null with std::optional</div><div class="ttdef"><b>Definition:</b> Registry.cpp:31</div></div>
</div><!-- fragment --><ol type="1">
<li>You can now make a game with the ecs. but You can also create systems, or use the systems that are already created. For example, if you want to move all the entities that have a position and a speed component, you can use the move_system.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> move_system(<a class="code" href="classregistry.html">registry</a>&amp; reg) {</div>
<div class="line">    <span class="keyword">auto</span>&amp; positions = reg.<a class="code" href="classregistry.html#a3149b283b4533fa3c8d9ee360f819769">get_components</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;();</div>
<div class="line">    <span class="keyword">auto</span>&amp; speeds = reg.<a class="code" href="classregistry.html#a3149b283b4533fa3c8d9ee360f819769">get_components</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; pos : positions) {</div>
<div class="line">        pos-&gt;x += speeds[pos].x;</div>
<div class="line">        pos-&gt;y += speeds[pos].y;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="classregistry.html">registry</a> reg;</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a1c8a6043f3ea73045ae7d3ada058890d">register_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;();</div>
<div class="line">    <a class="code" href="classentity__t.html">entity_t</a> player = reg.<a class="code" href="classregistry.html#a75d49eb0c9936d57146007f06cbaf735">spawn_entity</a>();</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structSpeed.html">Speed</a>&gt;(entity, <a class="code" href="structSpeed.html">Speed</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;(entity, <a class="code" href="structPosition.html">Position</a>());</div>
<div class="line">    reg.<a class="code" href="classregistry.html#a49084d6b8c636cb58dc0e9c4b442a339">add_component</a>&lt;<a class="code" href="structDrawable.html">Drawable</a>&gt;(entity, <a class="code" href="structDrawable.html">Drawable</a>());</div>
<div class="line">    <span class="keyword">auto</span>&amp; pos = reg.<a class="code" href="classregistry.html#a3149b283b4533fa3c8d9ee360f819769">get_components</a>&lt;<a class="code" href="structPosition.html">Position</a>&gt;()[player]; <span class="comment">// if you want to get a specific components of an entity, can use the operator []</span></div>
<div class="line">    pos-&gt;x = 300;</div>
<div class="line">    pos-&gt;y = 300;</div>
<div class="line">    <span class="comment">// if you dont want to use the entity anymore, you can kill it</span></div>
<div class="line">    reg.<a class="code" href="classregistry.html#a6c967fb2267fd8eaeb155f2be5b5650c">kill_entity</a>(player);</div>
<div class="line">    <span class="comment">// you can now use the move_system</span></div>
<div class="line">    move_system(reg);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
